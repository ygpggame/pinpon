<html>
    <head>
        <meta charset="UTF-8">
        <title>„ÇÑ„Åæ„Åå„Åè„ÅæÂçìÁêÉ</title>
        <style>
            @keyframes rakka {
                0%{top:40px;}
                80%{top:350px;}
                100%{top:350px;}
            }
            @keyframes up {
                0%{top:350px;}
                80%{top:40px;}
                100%{top:40px;}
            }
            @keyframes smash {
                0% {
                    transform: scale(1.0);
                    top:350px;
                }
                50% {
                    transform: scale(2.0);
                    top: 175px;
                }
                80% {
                    transform: scale(1.5);
                    top: 40px;
                }
                100% {
                    transform: scale(1.0);
                    top: 40px;
                }
            }
            .rakka{
                position: absolute;
                animation-name: rakka;
                animation-duration: 1.2s;
                animation-iteration-count: infinite;
                animation-timing-function: linear;
            }
            .smash{
                position: absolute;
                animation-name: smash;
                animation-duration: 1.2s;
                animation-iteration-count: 1;
                animation-timing-function: ease-in-out;
            }
            .up{
                position: absolute;
                animation-name: up;
                animation-duration: 1.2s;
                animation-iteration-count: infinite;
                animation-timing-function: linear;
            }
            .d-none {
                display: none;
            }
            .result {
                font-size: 20px;
                color: red;
            }
            .back-img {
                position: absolute;
                top: 20px;
                left: 20px;
                width: 550px;
                height: 360px;
                z-index: -1;
                pointer-events: none;
            }
            .cara {
                width: 50px;
                height: 50px;
                position: absolute;
            }
            .kuma {
                z-index: 10;
                width: 70px;
                height: 70px;
            }
            .move-btns {
                display: flex;
            }
            .score-board {
                display: flex;
                justify-content: space-between;
                width: 525px;
                margin-left: 25px;
            }
            .ene {
                width: 120px;
                height: 120px;
            }
        </style>
    </head>
    <body>
        <div class="score-board">
            <div class="my">
                <p class="my-t">Ëá™ÂàÜ„ÅÆÂæóÁÇπ</p>
                <p class="result" id="js-result">0</p>
            </div>
            <div class="ene">
                <p class="ene-t">Áõ∏Êâã„ÅÆÂæóÁÇπ</p>
                <p class="result" id="js-ene">0</p>
            </div>
        </div>
        <button id="js-start" class="start-btn">„Çπ„Çø„Éº„Éà</button>
        <img id="js-kuma" src="https://4a3btzgslag1w7ue.public.blob.vercel-storage.com/soccer/takkyu.png" class="kuma d-none cara">
        <img id="js-pinpon" src="https://4a3btzgslag1w7ue.public.blob.vercel-storage.com/soccer/pinpon.png" class="pinpon d-none cara">
        <img id="js-soccer" src="https://4a3btzgslag1w7ue.public.blob.vercel-storage.com/soccer/pinponcara.png" class="ene cara">
        <img src="https://4a3btzgslag1w7ue.public.blob.vercel-storage.com/soccer/fire.png" alt="fire-icon" id="js-fire-img" class="d-none fire-img cara">
        <img src="https://4a3btzgslag1w7ue.public.blob.vercel-storage.com/soccer/dai.png" class="back-img">
        <div>
            <p class="fire" id="js-fire"></p>
        </div>
        <script type="text/javascript">
        let score = 0;  // Ëá™ÂàÜ„ÅÆ„Çπ„Ç≥„Ç¢
        let eneScore = 0;  // Êïµ„ÅÆ„Çπ„Ç≥„Ç¢
        let kumaX = 150;  // „Ç´„Ç¥XÂ∫ßÊ®ô
        let cogumaId = 0;  // „Çø„Ç§„Éû„ÉºID
        let kumId = 0;  // „Çø„Ç§„Éû„ÉºID
        let basketX = 150;  // „Ç´„Ç¥XÂ∫ßÊ®ô
        let kuma = document.getElementById("js-kuma");
        let pinpon = document.getElementById("js-pinpon");
        const startButton = document.getElementById("js-start");
        const result = document.getElementById("js-result");
        const ene = document.getElementById("js-ene");
        const left = document.getElementById("left");
        const right = document.getElementById("right");
        const fire = document.getElementById("js-fire");
        const fireImg = document.getElementById("js-fire-img");
        startButton.addEventListener("click",  (e) => {
            game();
            startButton.classList.add("d-none");
        });
        function game () {
            score = 0;  // „Çπ„Ç≥„Ç¢
            kuma.classList.remove("d-none");
            cogumaId = setInterval(cogumaRakka, 2300);
            kuma.style.top = 320 + "px";
            kuma.style.left = kumaX + "px";
            kumId = setInterval(kumaCatch, 50);
            window.addEventListener("mousemove",  (e) => {
                if (e.clientX < 25) {
                    basketX = 25;
                } else if (e.clientX > 525) {
                    basketX = 525;
                } else {
                    basketX = e.clientX;
                }
            });
        };

        addEventListener("dblclick", (e) => {
            fire.textContent = "„Éï„Ç°„Ç§„É§„Éº„Çπ„Éû„ÉÉ„Ç∑„É•!!üî•üî•üî•";
            pinpon.classList.add("d-none");
            fireImg.style.left = kuma.style.left;
            fireImg.style.top = 320 + "px";
            fireImg.classList.remove("d-none");
            fireImg.classList.add("smash");
            setTimeout(() => {
                fire.textContent = "";
                pinpon.classList.remove("d-none");
                fireImg.classList.add("d-none");
                fireImg.classList.remove("up");
            }, 1000);
        });


        function cogumaRakka() {
            let leftX = 25 + Math.random()* 500;
            pinpon.style.left = leftX + "px";
            pinpon.style.top = 40 + "px";
            pinpon.classList.remove("d-none");
            pinpon.classList.add("rakka");
            setTimeout(() => {
                pinpon.classList.remove("rakka");
                pinpon.classList.add("up");
                if (Math.abs(leftX - basketX) < 50) {
                    score += 1;
                } else {
                    clearInterval(cogumaId);
                    eneScore += 1;
                    ene.textContent = eneScore + "ÁÇπ";
                    // result.textContent = "„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº!!üò¢";
                    startButton.classList.remove("d-none");
                }
            }, 1000);
            setTimeout(() => {
                pinpon.classList.remove("up");
                pinpon.classList.add("d-none");
            }, 2000);
            result.textContent = "ÂæóÁÇπ" + score + "ÁÇπ";
        }
        function kumaCatch() {
            kuma.style.left = basketX + "px"
            kuma.style.top = 320 + "px";
        }
        </script>
    </body>
</html>